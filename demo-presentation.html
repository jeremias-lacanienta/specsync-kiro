<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SpecSync - Kiro Conversation Demo</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            color: white;
            overflow: hidden;
        }

        .container {
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        .chat-container {
            background: rgba(0, 0, 0, 0.8);
            border-radius: 15px;
            padding: 30px;
            margin: 20px;
            max-width: 800px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .user-message {
            background: #4CAF50;
            padding: 15px 20px;
            border-radius: 20px 20px 5px 20px;
            margin: 10px 0;
            font-size: 16px;
            animation: slideInRight 0.5s ease-out;
        }

        .kiro-message {
            background: #2196F3;
            padding: 15px 20px;
            border-radius: 20px 20px 20px 5px;
            margin: 10px 0;
            font-size: 16px;
            animation: slideInLeft 0.5s ease-out;
        }

        .typing-indicator {
            display: inline-block;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #666;
            animation: pulse 1.5s infinite;
            margin: 0 2px;
        }

        .code-explosion {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1000;
        }

        .code-file {
            position: absolute;
            background: rgba(40, 44, 52, 0.95);
            border: 1px solid #61dafb;
            border-radius: 8px;
            padding: 15px;
            font-size: 12px;
            color: #abb2bf;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            transform: scale(0);
            animation: explodeIn 0.8s ease-out forwards;
        }

        .line-counter {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 72px;
            font-weight: bold;
            color: #4CAF50;
            text-shadow: 0 0 20px rgba(76, 175, 80, 0.5);
            animation: countUp 3s ease-out;
        }

        .final-stats {
            position: absolute;
            bottom: 50px;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
            font-size: 24px;
            opacity: 0;
            animation: fadeInUp 1s ease-out 4s forwards;
        }

        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes slideInLeft {
            from { transform: translateX(-100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.4; }
            50% { opacity: 1; }
        }

        @keyframes explodeIn {
            0% { 
                transform: scale(0) rotate(180deg);
                opacity: 0;
            }
            50% {
                transform: scale(1.1) rotate(10deg);
                opacity: 0.8;
            }
            100% { 
                transform: scale(1) rotate(0deg);
                opacity: 1;
            }
        }

        @keyframes countUp {
            0% { transform: translate(-50%, -50%) scale(0); }
            100% { transform: translate(-50%, -50%) scale(1); }
        }

        @keyframes fadeInUp {
            from { 
                transform: translateX(-50%) translateY(20px);
                opacity: 0;
            }
            to { 
                transform: translateX(-50%) translateY(0);
                opacity: 1;
            }
        }

        .highlight {
            color: #61dafb;
            font-weight: bold;
        }

        .success {
            color: #4CAF50;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="chat-container" id="chatContainer">
            <!-- Chat messages will be added here -->
        </div>
        
        <div class="code-explosion" id="codeExplosion">
            <!-- Code files will explode here -->
        </div>
        
        <div class="line-counter" id="lineCounter" style="display: none;">
            0
        </div>
        
        <div class="final-stats" id="finalStats">
            <div class="success">✨ 296 Lines of Production Code ✨</div>
            <div>Generated from one simple conversation</div>
        </div>
    </div>

    <script>
        const chatContainer = document.getElementById('chatContainer');
        const codeExplosion = document.getElementById('codeExplosion');
        const lineCounter = document.getElementById('lineCounter');
        
        const conversation = [
            {
                type: 'user',
                text: 'I want to build an AI-powered specification review meeting room',
                delay: 1000
            },
            {
                type: 'typing',
                delay: 2000
            },
            {
                type: 'kiro',
                text: 'I can help you build that! Let me break this down into components:',
                delay: 1000
            },
            {
                type: 'kiro',
                text: '• <span class="highlight">React frontend</span> for the user interface<br>• <span class="highlight">Node.js backend</span> for server logic<br>• <span class="highlight">WebSocket integration</span> for real-time collaboration<br>• <span class="highlight">Database layer</span> for storing meetings',
                delay: 2000
            },
            {
                type: 'kiro',
                text: 'Let me generate the code for you...',
                delay: 1000
            }
        ];

        const codeFiles = [
            {
                name: 'server/index.js',
                content: `const express = require('express');
const socketIo = require('socket.io');
const sqlite3 = require('sqlite3');

// WebSocket real-time collaboration
io.on('connection', (socket) => {
  socket.on('join-meeting', (data) => {
    // Real-time meeting logic
  });
});`,
                position: { top: '10%', left: '10%' },
                delay: 6000
            },
            {
                name: 'client/src/App.js',
                content: `import React from 'react';
import { ThemeProvider } from '@mui/material';
import CreateMeeting from './components/CreateMeeting';

function App() {
  return (
    <ThemeProvider theme={theme}>
      <CreateMeeting />
    </ThemeProvider>
  );
}`,
                position: { top: '20%', right: '10%' },
                delay: 6500
            },
            {
                name: 'WebSocket Handlers',
                content: `// Real-time collaboration
socket.on('add-annotation', (data) => {
  // Broadcast to all participants
  io.to(meetingId).emit('new-annotation', data);
  
  // Trigger AI facilitation
  generateFacilitation(data);
});`,
                position: { bottom: '20%', left: '15%' },
                delay: 7000
            },
            {
                name: 'Database Schema',
                content: `CREATE TABLE meetings (
  id TEXT PRIMARY KEY,
  title TEXT NOT NULL,
  spec_content TEXT,
  analysis TEXT,
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);`,
                position: { bottom: '10%', right: '15%' },
                delay: 7500
            }
        ];

        async function startDemo() {
            for (let i = 0; i < conversation.length; i++) {
                const message = conversation[i];
                await new Promise(resolve => setTimeout(resolve, message.delay));
                
                if (message.type === 'typing') {
                    showTyping();
                    await new Promise(resolve => setTimeout(resolve, 2000));
                    hideTyping();
                } else {
                    addMessage(message.type, message.text);
                }
            }
            
            // Start code explosion
            setTimeout(() => {
                explodeCode();
            }, 1000);
        }

        function addMessage(type, text) {
            const messageDiv = document.createElement('div');
            messageDiv.className = type === 'user' ? 'user-message' : 'kiro-message';
            messageDiv.innerHTML = text;
            chatContainer.appendChild(messageDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        function showTyping() {
            const typingDiv = document.createElement('div');
            typingDiv.className = 'kiro-message';
            typingDiv.id = 'typing';
            typingDiv.innerHTML = `
                <span class="typing-indicator"></span>
                <span class="typing-indicator"></span>
                <span class="typing-indicator"></span>
                Kiro is thinking...
            `;
            chatContainer.appendChild(typingDiv);
        }

        function hideTyping() {
            const typing = document.getElementById('typing');
            if (typing) typing.remove();
        }

        function explodeCode() {
            // Hide chat
            chatContainer.style.opacity = '0.3';
            
            // Show code files
            codeFiles.forEach(file => {
                setTimeout(() => {
                    const fileDiv = document.createElement('div');
                    fileDiv.className = 'code-file';
                    fileDiv.style.top = file.position.top || 'auto';
                    fileDiv.style.bottom = file.position.bottom || 'auto';
                    fileDiv.style.left = file.position.left || 'auto';
                    fileDiv.style.right = file.position.right || 'auto';
                    fileDiv.innerHTML = `
                        <div style="color: #61dafb; font-weight: bold; margin-bottom: 10px;">
                            📄 ${file.name}
                        </div>
                        <pre style="margin: 0; white-space: pre-wrap;">${file.content}</pre>
                    `;
                    codeExplosion.appendChild(fileDiv);
                }, file.delay);
            });
            
            // Show line counter
            setTimeout(() => {
                lineCounter.style.display = 'block';
                animateCounter();
            }, 8000);
        }

        function animateCounter() {
            let count = 0;
            const target = 296;
            const duration = 2000;
            const increment = target / (duration / 50);
            
            const timer = setInterval(() => {
                count += increment;
                if (count >= target) {
                    count = target;
                    clearInterval(timer);
                }
                lineCounter.textContent = Math.floor(count);
            }, 50);
        }

        // Auto-start demo
        setTimeout(startDemo, 1000);
    </script>
</body>
</html>